<h3>Meeting</h3>

<div *ngIf="showLoaded" class="overlay"></div>
<div *ngIf="showLoaded" id="loaderModernize"></div>

<!--Button clear filters-->
<div style="margin-bottom:10px;float:left;">
    <button type="button" class="btn btn-labeled btn-info" (click)="clearFilters()">
        <span class="btn-label"><i class="glyphicon glyphicon-repeat"></i></span> Clear filter
    </button>
</div>

<!--Year filter-->
<div class="dropdown" style="float:left;margin-top:7px; margin-left:7px">Year&nbsp;</div>
<div class="dropdown" style="float:left;">
    <select class="mySelect form-control input-sm " [(ngModel)]="selectedAwp" (ngModelChange)="loadLookupList()">
        <option *ngFor="let awp of awpList" [ngValue]="awp"> {{awp.text}} </option>
    </select>
</div>

<table class="table table-striped table-bordered table-hover table-condensed table-sm">
    <thead id="tableHeader">
        <tr>
            <th></th>
            <th>
                Id
               
            </th>
            <th>
                Code
             
            </th>
            <th>
                Expense name
           
            </th>
            <th>
                BL
              
            </th>
            <th>
                Organiser
                
            </th>
            <th>
                Location
                
            </th>
            <th>
                Start date
                
            </th>
            <th>
                Initiation deadline
               
            </th>
            <th>
                Amount
               
            </th>
            <th>
                Committed
              
            </th>
            <th>
                Status
                
            </th>
            <th>
                Change requested
            </th>
        </tr>
    </thead>

    <!--<tbody class="avoid-sort">
        <tr class="trFilter">
            <td></td>
            <td></td>
            <td></td>
            <td class="col-md-2">
                @*Autocomplete*@
                <input type="text" ng-model="f.ExpenseName" placeholder="Expense name..." uib-typeahead="meeting.ExpenseName for meeting in meetingList| filter:{ExpenseName:$viewValue} " class="form-control input-sm" typeahead-show-hint="true" typeahead-min-length="2" ng-keyup="$event.keyCode == 13 && filterTable();" />
            </td>
            <td class="col-md-1"><select class="mySelect form-control input-sm " ng-model="selectedBudgetLine" ng-options="p.Text for p in budgetLineList| filter: budgetLineComparator" ng-change="filterTable()"></select></td>
            <td class="col-md-1"><select class="mySelect form-control input-sm " ng-model="selectedOrganiser" ng-options="p.Text for p in organiserList" ng-change="filterTable()"></select></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td class="col-md-1"><select class="mySelect form-control input-sm " ng-model="selectedMeetingStatus" ng-options="p.Text for p in meetingStatusList" ng-change="multiStatusFilter()"></select></td>
            <td class="col-md-1"></td>
        </tr>
    </tbody>-->

    <tbody>

        <tr  *ngFor="let meeting of meetingList | activityFilter : filter"  style="cursor:pointer">
            <td style="min-width:55px">
                <button tooltip-placement="right" type="button" *ngIf="!meeting.expanded" (click)="meeting.expanded = true" class="btn btn-labeled btn-default btn-xs" style="width:22px">
                    <!--<span class="btn-label">{{meeting.subMeetingList.length}}+ </span>-->
                </button>
                <button type="button" ng-if="meeting.expanded" (click)="meeting.expanded = false" class="btn btn-labeled btn-default btn-xs" style="width:22px">
                    <span class="btn-label">-</span>
                </button>
                <img src={{meeting.statusIcon}} style="cursor:pointer;" />
            </td>
            <td>
                {{meeting.expenseId}}
            </td>
            <td >
                {{meeting.meetingCode}}
            </td>
            <td class="col-md-2" >
                {{meeting.expenseName}}
            </td>
            <td class="col-md-1" >
                {{meeting.budgetLineCode}}
            </td>
            <td class="col-md-1">
                <a href="{{meeting.organiserEmail}}" class="btn-label" style="color:dimgrey"><i class="glyphicon glyphicon-envelope" style="cursor:pointer"></i></a>
                {{meeting.organiser}}
            </td>
            <td class="col-md-1" >
                {{meeting.meetingLocation}}
            </td>
            <td class="col-md-1" >
                {{meeting.meetingStartDate| date :'dd/MM/yyyy'}}
            </td>
            <td class="col-md-1" >
                {{meeting.meetingInitiationDate| date :'dd/MM/yyyy'}}
            </td>
            <td class="col-md-1" >
                {{meeting.amount}}
            </td>
            <td class="col-md-1" >
                {{meeting.amountCommitted}}
            </td>
            <td class="col-md-1" >
                {{meeting.statusName}}
            </td>
            <td class="col-md-1" >
                <span ng-hide="meeting.approvalStatusName ==''"
                      ng-class="{hoSApproval:meeting.ApprovalStatusName=='Wait head of section approval', smtApproval:meeting.ApprovalStatusName=='Wait SMT approval', hoUApproval:meeting.ApprovalStatusName=='Wait head of unit approval'}">
                    <i class="glyphicon glyphicon-flag"></i>{{meeting.approvalStatusName}}
                </span>
            </td>
        </tr>

      
    </tbody>
</table>